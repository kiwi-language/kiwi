import java.io.ObjectOutputStream
import java.io.ObjectInputStream

class Foo {

    priv var bar = Bar(this)

    fn getBar() -> Bar {
        return this.bar
    }

    priv fn writeObject(s: ObjectOutputStream) {
    }

    priv fn readObject(s: ObjectInputStream) {
         this.bar = Bar(this)
    }

}

class Bar {

    priv var foo: Foo

    init(foo: Foo) {
        this.foo = foo
    }

    fn getFoo() -> Foo {
        return this.foo
    }

}