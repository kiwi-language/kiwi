package org.metavm.mocks;

import org.metavm.mocks.UpgradeFoo;
import org.metavm.mocks.UpgradeBar;
import org.metavm.mocks.UpgradeValue;

class UpgradeFooInitializer {

    public static string __code__(UpgradeFoo foo) {
        return foo.name;
    }

    public static UpgradeBar __bar__(UpgradeFoo foo) {
        bar: allocate UpgradeBar { name: concat(foo.name, "-bar") };
        return bar;
    }

    public static void __run__(UpgradeFoo foo) {
        value: selectFirst(UpgradeValue.IDX_FOO, foo);
        if (value == null) {
            newValue: allocate UpgradeValue {foo: foo};
            newValue.value = foo.value;
        }
    }

}