import java.io.ObjectOutputStream;
import java.io.ObjectInputStream;

class Foo {

    private Bar bar;

    public Foo() {
        this.bar = this.new Bar(this);
    }

    public Bar getBar() {
        return this.bar;
    }

    private void writeObject(ObjectOutputStream s) {
    }

    private void readObject(ObjectInputStream s) {
         this.bar = new Bar(this);
    }

}

class Bar {

    private Foo foo;

    public Bar(Foo foo) {
        this.foo = foo;
    }

    public Foo getFoo() {
        return this.foo;
    }

}